# WorkoutLog Development Guidelines

## Theme Implementation

### NativeWind-Based Theming System

This app uses **NativeWind v4** for styling with CSS variable-based color themes. The theming system supports:
- 7 color themes (default, ocean, forest, sunset, rose, violet, slate)
- Light and dark mode variants for each theme
- CSS variables applied via NativeWind's `vars()` function

### Two Approaches to Theme Colors

**1. Tailwind Classes (Preferred)**
Use Tailwind classes for most UI elements:

```typescript
// CORRECT: Use Tailwind classes
<View className="flex-1 p-4 bg-background">
  <Text className="text-lg font-bold text-foreground">Title</Text>
  <Text className="text-sm text-foreground-secondary">Subtitle</Text>
</View>
```

**2. Raw Colors for Special Cases**
Use `rawColors` for SVG, charts, third-party components, or dynamic inline styles:

```typescript
import { useTheme } from '../lib/theme/ThemeContext';

function MyComponent() {
  const { rawColors } = useTheme();
  
  return (
    <>
      {/* SVG fill colors */}
      <Circle fill={rawColors.primary} />
      
      {/* Dynamic styles */}
      <View style={{ borderColor: rawColors.border }}>
        ...
      </View>
      
      {/* Third-party components */}
      <Picker dropdownIconColor={rawColors.foregroundSecondary} />
    </>
  );
}
```

### Available Tailwind Color Classes

These colors are defined in `tailwind.config.js` and powered by CSS variables:

**Backgrounds:**
- `bg-background` - Main page background
- `bg-surface` - Cards, modals, containers
- `bg-surface-secondary` - Input backgrounds, secondary surfaces

**Text:**
- `text-foreground` - Primary text
- `text-foreground-secondary` - Subtitles, labels
- `text-foreground-muted` - Hints, disabled text

**Interactive:**
- `bg-primary` / `text-primary` - Primary actions, links
- `bg-primary-light` - Light primary backgrounds
- `text-primary-foreground` - Text on primary buttons
- `bg-pressed` - Press state backgrounds

**Status:**
- `text-success` / `bg-success` - Success states
- `text-warning` / `bg-warning` - Warning states
- `text-destructive` / `bg-destructive` - Error/delete states

**Borders:**
- `border-border` - Standard borders
- `border-border-light` - Subtle borders

**Overlays:**
- `bg-overlay` - Modal backdrop
- `bg-overlay-dark` - Darker overlay

### Raw Color Properties (for `rawColors`)

When using `rawColors`, these properties are available:

```typescript
const { rawColors } = useTheme();

// Backgrounds
rawColors.background
rawColors.surface
rawColors.surfaceSecondary

// Foreground (text/icons)
rawColors.foreground
rawColors.foregroundSecondary
rawColors.foregroundMuted

// Interactive
rawColors.primary
rawColors.primaryLight
rawColors.primaryForeground
rawColors.pressed

// Status
rawColors.success
rawColors.warning
rawColors.destructive

// Borders
rawColors.border
rawColors.borderLight

// Special
rawColors.overlay
rawColors.overlayDark
rawColors.shadow
rawColors.prGold
```

### Theme State Access

```typescript
const { 
  rawColors,        // Raw hex color values
  colorTheme,       // 'default', 'ocean', etc.
  colorScheme,      // 'light' or 'dark'
  isDark,           // boolean
  setColorTheme,    // Change color theme
  setThemePreference // Change light/dark mode ('system', 'light', 'dark')
} = useTheme();
```

### Color Themes

Available themes defined in `lib/theme/themes.ts`:
- `default` - iOS-style blue
- `ocean` - Teal/cyan
- `forest` - Emerald green
- `sunset` - Orange/amber
- `rose` - Pink/rose
- `violet` - Purple
- `slate` - Neutral gray

### Component Patterns

#### New Screen Template

```typescript
import { Text, View } from 'react-native';
import { useTheme } from '../lib/theme/ThemeContext';

export default function NewScreen() {
  const { rawColors } = useTheme();

  return (
    <View className="flex-1 p-4 bg-background">
      <Text className="text-2xl font-bold text-foreground">
        Screen Title
      </Text>
      <Text className="text-base mt-1 text-foreground-secondary">
        Subtitle text
      </Text>
    </View>
  );
}
```

#### Card Component

```typescript
<View 
  className="rounded-2xl p-5 mb-4 bg-surface"
  style={{ 
    shadowColor: rawColors.shadow, 
    shadowOffset: { width: 0, height: 2 }, 
    shadowOpacity: 0.1, 
    shadowRadius: 8, 
    elevation: 4 
  }}
>
  <Text className="text-lg font-semibold text-foreground">Card Title</Text>
</View>
```

#### Pressable Button

```typescript
<Pressable
  className="py-3 px-4 rounded-lg bg-primary"
  style={({ pressed }) => ({ 
    opacity: pressed ? 0.8 : 1 
  })}
  onPress={handlePress}
>
  <Text className="text-base font-semibold text-center text-primary-foreground">
    Button
  </Text>
</Pressable>
```

#### TextInput

```typescript
<TextInput
  className="border border-border rounded-lg p-3 text-base bg-surface-secondary text-foreground"
  placeholder="Enter value..."
  placeholderTextColor={rawColors.foregroundMuted}
/>
```

#### Modal with BaseModal

```typescript
import BaseModal from '../components/modals/BaseModal';

<BaseModal visible={visible} onClose={onClose}>
  <Text className="text-xl font-bold text-foreground">Modal Title</Text>
  <Text className="text-base mt-2 text-foreground-secondary">Content</Text>
</BaseModal>
```

### Adding New Color Themes

To add a new theme, edit `lib/theme/themes.ts`:

1. Add the theme ID to `ColorThemeId` type
2. Add preview to `COLOR_THEME_OPTIONS` array
3. Create light/dark variants in `themes` object
4. Follow the existing pattern with CSS variable names

### Important Rules

1. **Never hardcode colors** - Always use Tailwind classes or rawColors
2. **Use rawColors for SVG/charts** - Tailwind classes don't work with SVG fills
3. **Use rawColors for placeholderTextColor** - React Native requires hex values
4. **Use rawColors for third-party components** - Like Picker dropdown colors
5. **Shadow colors need rawColors** - shadowColor only accepts color strings

## File Structure

- **Screens**: `app/` (Expo Router)
- **Components**: `components/`
- **Modals**: `components/modals/`
- **Charts**: `components/charts/`
- **Theme**: `lib/theme/` (ThemeContext.tsx, themes.ts)
- **Database**: `lib/db/`
- **Hooks**: `lib/hooks/`
- **Utilities**: `lib/utils/`
